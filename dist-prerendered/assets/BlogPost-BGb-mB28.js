import{j as e}from"./ui-core-DIFKu14A.js";import{a as t,L as s}from"./router-Enmi9DRI.js";import{u as a}from"./data-BmXeSXkP.js";import{B as l,ag as r,ae as i,af as c,ah as m,s as n}from"./page-home-CQU8oqVu.js";import{u as d}from"./page-contact-CfDnysdY.js";import{r as o}from"./react-core-CGKACH0y.js";import{B as x}from"./page-products-B7wMRW4G.js";import"./page-product-detail-BoFGybH8.js";const p=()=>{const{slug:p}=t(),{toast:h}=d(),{data:g,isLoading:u,error:j}=a({queryKey:["blog-post",p],queryFn:()=>(async e=>{const{data:t,error:s}=await n.from("blog_posts").select("*").eq("slug",e).maybeSingle();if(s)throw s;return t})(p),enabled:!!p,staleTime:3e5});return o.useEffect(()=>{if(g){document.title=g.seo_title||g.title;let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.name="description",document.head.appendChild(e)),e.content=g.seo_description||g.excerpt||"";let t=document.querySelector('meta[name="keywords"]');t||(t=document.createElement("meta"),t.name="keywords",document.head.appendChild(t)),t.content=g.seo_keywords||"";let s=document.querySelector('meta[property="og:title"]');s||(s=document.createElement("meta"),s.setAttribute("property","og:title"),document.head.appendChild(s)),s.content=g.seo_title||g.title;let a=document.querySelector('meta[property="og:description"]');a||(a=document.createElement("meta"),a.setAttribute("property","og:description"),document.head.appendChild(a)),a.content=g.seo_description||g.excerpt||""}},[g]),u?e.jsx("div",{className:"bg-gray-50 py-10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})})}):j||!g?e.jsx("div",{className:"bg-gray-50 py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Artiklit ei leitud"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Kahjuks ei õnnestunud seda artiklit leida."}),e.jsx(s,{to:"/blogi",children:e.jsxs(l,{children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Tagasi blogisse"]})})]})}):e.jsxs("div",{className:"bg-gray-50 py-10",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:e.jsx("div",{className:"mb-6",children:e.jsx(x,{})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:[e.jsxs(s,{to:"/blogi",className:"inline-flex items-center text-gray-600 hover:text-primary mb-8",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Tagasi blogisse"]}),e.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[g.image_url&&e.jsx("div",{className:"h-64 md:h-96 overflow-hidden",children:e.jsx("img",{src:g.image_url,alt:g.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{size:16}),e.jsx("span",{children:(y=g.created_at,new Date(y).toLocaleDateString("et-EE",{year:"numeric",month:"long",day:"numeric"}))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:16}),e.jsxs("span",{children:[g.read_time," lugemist"]})]})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:async()=>{if(navigator.share)try{await navigator.share({title:g?.title,text:g?.excerpt,url:window.location.href})}catch(e){}else await navigator.clipboard.writeText(window.location.href),h({title:"Link kopeeritud",description:"Artikli link on kopeeritud lõikelauale"})},className:"flex items-center gap-2",children:[e.jsx(m,{size:16}),"Jaga"]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:g.title}),e.jsx("div",{className:"text-lg text-gray-600 mb-8 font-medium leading-relaxed",children:g.excerpt}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:(b=g.content,b.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/### (.*?)$/gm,'<h3 class="text-xl font-semibold mt-6 mb-3">$1</h3>').replace(/## (.*?)$/gm,'<h2 class="text-2xl font-semibold mt-8 mb-4">$1</h2>').replace(/# (.*?)$/gm,'<h1 class="text-3xl font-bold mt-8 mb-4">$1</h1>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-primary underline hover:text-primary/80" target="_blank" rel="noopener noreferrer">$1</a>').replace(/^- (.*)$/gm,'<li class="ml-4">$1</li>').replace(/^(\d+)\. (.*)$/gm,'<li class="ml-4">$2</li>').replace(/\n\n/g,'</p><p class="mb-4">').replace(/^/,'<p class="mb-4">').replace(/$/,"</p>").replace(/<li class="ml-4">(.*?)<\/li>/g,(e,t)=>e.replace(/<\/?p[^>]*>/g,"")))}})]})]}),e.jsxs("section",{className:"bg-primary text-white py-12 px-8 rounded-lg mt-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Küsimusi artikli kohta?"}),e.jsx("h3",{className:"text-xl font-medium mb-6",children:"Võtke meiega ühendust!"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:"+372 5919 7172"}),e.jsx("div",{className:"text-sm opacity-90",children:"Ootame kõnet tööpäeviti 9.00-17.00"})]}),e.jsx(l,{variant:"secondary",children:"Võta ühendust"})]})]})]})]});var b,y};export{p as default};
