import{j as e}from"./ui-core-DIFKu14A.js";import{r as a}from"./react-core-CGKACH0y.js";import{B as l,s}from"./page-home-CQU8oqVu.js";import"./router-Enmi9DRI.js";import"./data-BmXeSXkP.js";const t="meist_header",i="meist_description",d="meist",n=[{label:"Check",value:"check"},{label:"User",value:"user"},{label:"Heart",value:"heart"},{label:"Globe",value:"globe"},{label:"Star",value:"star"},{label:"Thumbs Up",value:"thumbs-up"}],r=()=>{const[r,o]=a.useState(""),[u,m]=a.useState(""),[c,p]=a.useState(""),[b,x]=a.useState([{value:"",label:""}]),[h,v]=a.useState([{icon:"check",title:"",text:""}]),[k,j]=a.useState(!0),[g,y]=a.useState(!1),[f,_]=a.useState(!1),[N,C]=a.useState("Valmis oma projekti alustama?"),[w,S]=a.useState("Arutame su ideid ja loome koos midagi ainulaadset, mis esindab su brändi parimal viisil."),[$,M]=a.useState("Küsi pakkumist"),[A,K]=a.useState("Meie missioon"),[z,T]=a.useState([""]);a.useEffect(()=>{(async()=>{j(!0);const{data:e,error:a}=await s.from("website_content").select("key, value").eq("page",d);if(e){o(e.find(e=>e.key===t)?.value||""),m(e.find(e=>"meist_header_highlight"===e.key)?.value||""),p(e.find(e=>e.key===i)?.value||"");const a=[];for(let t=1;6>=t;t++){const l=e.find(e=>e.key===`meist_stat_${t}_value`)?.value||"",s=e.find(e=>e.key===`meist_stat_${t}_label`)?.value||"";(l||s)&&a.push({value:l,label:s})}x(a.length?a:[{value:"",label:""}]);const l=[];for(let t=1;6>=t;t++){const a=e.find(e=>e.key===`meist_promise_${t}_icon`)?.value||"check",s=e.find(e=>e.key===`meist_promise_${t}_title`)?.value||"",i=e.find(e=>e.key===`meist_promise_${t}_text`)?.value||"";(s||i)&&l.push({icon:a,title:s,text:i})}v(l.length?l:[{icon:"check",title:"",text:""}]),C(e.find(e=>"meist_cta_title"===e.key)?.value||"Valmis oma projekti alustama?"),S(e.find(e=>"meist_cta_text"===e.key)?.value||"Arutame su ideid ja loome koos midagi ainulaadset, mis esindab su brändi parimal viisil."),M(e.find(e=>"meist_cta_button"===e.key)?.value||"Küsi pakkumist"),K(e.find(e=>"meist_mission_title"===e.key)?.value||"Meie missioon");const s=[];for(let t=1;3>=t;t++){const a=e.find(e=>e.key==="meist_mission_text_"+t)?.value||"";a&&s.push(a)}T(s.length?s:[""])}j(!1)})()},[]);const L=(e,a,l)=>{x(s=>s.map((s,t)=>t===e?{...s,[a]:l}:s))},E=(e,a,l)=>{v(s=>s.map((s,t)=>t===e?{...s,[a]:l}:s))};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Meist lehe sisu haldus"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"Siin saad muuta kogu /meist lehe teksti, numbreid ja lubadusi."}),e.jsxs("form",{className:"space-y-8 max-w-2xl",onSubmit:async e=>{e.preventDefault(),y(!0),_(!1);const a=[{page:d,key:t,value:r},{page:d,key:"meist_header_highlight",value:u},{page:d,key:i,value:c},...b.map((e,a)=>[{page:d,key:`meist_stat_${a+1}_value`,value:e.value},{page:d,key:`meist_stat_${a+1}_label`,value:e.label}]).flat(),...h.map((e,a)=>[{page:d,key:`meist_promise_${a+1}_icon`,value:e.icon},{page:d,key:`meist_promise_${a+1}_title`,value:e.title},{page:d,key:`meist_promise_${a+1}_text`,value:e.text}]).flat(),{page:d,key:"meist_cta_title",value:N},{page:d,key:"meist_cta_text",value:w},{page:d,key:"meist_cta_button",value:$},{page:d,key:"meist_mission_title",value:A},...z.map((e,a)=>({page:d,key:"meist_mission_text_"+(a+1),value:e}))],{error:l}=await s.from("website_content").upsert(a,{onConflict:"page,key"});y(!1),l||_(!0)},children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Pealkiri (header)"}),e.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Meie lugu",value:r,onChange:e=>o(e.target.value),disabled:k||g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Highlight with red"}),e.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"lugu",value:u,onChange:e=>m(e.target.value),disabled:k||g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Kirjeldus (description)"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Tutvu meie missiooniga...",rows:3,value:c,onChange:e=>p(e.target.value),disabled:k||g})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Numbrid (stat boxes)"}),b.map((a,s)=>e.jsxs("div",{className:"flex gap-2 mb-2 items-center",children:[e.jsx("input",{type:"text",className:"border rounded px-2 py-1 w-24",placeholder:"Väärtus",value:a.value,onChange:e=>L(s,"value",e.target.value),disabled:k||g}),e.jsx("input",{type:"text",className:"border rounded px-2 py-1 flex-1",placeholder:"Silt",value:a.label,onChange:e=>L(s,"label",e.target.value),disabled:k||g}),e.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>x(a=>a.filter((a,l)=>l!==e)))(s),disabled:1===b.length||k||g,children:"Eemalda"})]},s)),e.jsx(l,{type:"button",variant:"secondary",size:"sm",onClick:()=>x([...b,{value:"",label:""}]),disabled:k||g,children:"Lisa number"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Lubadused (promise cards)"}),h.map((a,s)=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 mb-4 items-center md:items-end",children:[e.jsx("select",{className:"border rounded px-2 py-1 w-32",value:a.icon,onChange:e=>E(s,"icon",e.target.value),disabled:k||g,children:n.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("input",{type:"text",className:"border rounded px-2 py-1 flex-1",placeholder:"Pealkiri",value:a.title,onChange:e=>E(s,"title",e.target.value),disabled:k||g}),e.jsx("input",{type:"text",className:"border rounded px-2 py-1 flex-1",placeholder:"Kirjeldus",value:a.text,onChange:e=>E(s,"text",e.target.value),disabled:k||g}),e.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>(e=>v(a=>a.filter((a,l)=>l!==e)))(s),disabled:1===h.length||k||g,children:"Eemalda"})]},s)),e.jsx(l,{type:"button",variant:"secondary",size:"sm",onClick:()=>v([...h,{icon:"check",title:"",text:""}]),disabled:k||g,children:"Lisa lubadus"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Kutse tegevusele (CTA)"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Pealkiri (CTA title)"}),e.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Valmis oma projekti alustama?",value:N,onChange:e=>C(e.target.value),disabled:k||g})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Kirjeldus (CTA text)"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Arutame su ideid ja loome koos midagi ainulaadset, mis esindab su brändi parimal viisil.",rows:2,value:w,onChange:e=>S(e.target.value),disabled:k||g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Nupp (CTA button text)"}),e.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Küsi pakkumist",value:$,onChange:e=>M(e.target.value),disabled:k||g})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Missioon"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block font-medium mb-1",children:"Pealkiri (Mission title)"}),e.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",placeholder:"Meie missioon",value:A,onChange:e=>K(e.target.value),disabled:k||g})]}),z.map((a,s)=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("label",{className:"block font-medium mb-1",children:["Lõik ",s+1]}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Missiooni lõik "+(s+1),rows:2,value:a,onChange:e=>T(a=>a.map((a,l)=>l===s?e.target.value:a)),disabled:k||g}),e.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>T(e=>e.filter((e,a)=>a!==s)),disabled:1===z.length||k||g,children:"Eemalda"})]},s)),3>z.length&&e.jsx(l,{type:"button",variant:"secondary",size:"sm",onClick:()=>T([...z,""]),disabled:k||g,children:"Lisa lõik"})]}),e.jsx(l,{type:"submit",disabled:k||g,children:g?"Salvestan...":"Salvesta kõik"}),f&&e.jsx("div",{className:"text-green-600 mt-2",children:"Salvestatud!"})]})]})};export{r as default};
