import{j as e}from"./ui-core-DIFKu14A.js";import{r as a}from"./react-core-CGKACH0y.js";import{u as s}from"./data-BmXeSXkP.js";import{B as t,ac as l,n as i,O as r,ad as d,o,X as c,s as n}from"./page-home-CQU8oqVu.js";import{B as m,D as x,b as h}from"./admin-main-DCIQnyrp.js";import{B as p}from"./page-products-B7wMRW4G.js";import"./router-Enmi9DRI.js";import"./page-product-detail-BoFGybH8.js";import"./page-contact-CfDnysdY.js";import"./admin-auth-DWhB8gXl.js";const g=async()=>{const{data:e,error:a}=await n.from("portfolio").select("*").eq("visible",!0).order("order",{ascending:!0});if(a)throw a;return e||[]},u=()=>{const[u,j]=a.useState("all"),[f,b]=a.useState([]),[v,y]=a.useState(null),[N,w]=a.useState(""),[k,_]=a.useState(""),[S,C]=a.useState(""),[P,q]=a.useState(""),[B,z]=a.useState(""),[V,E]=a.useState([]),[F,K]=a.useState(""),[O,$]=a.useState(""),[D,L]=a.useState(""),{data:T=[],isLoading:A,error:G}=s({queryKey:["portfolio-items"],queryFn:g,staleTime:3e5});a.useEffect(()=>{let e=!0;return(async()=>{try{const{data:a}=await n.from("website_content").select("key, value").eq("page","portfolio");if(a&&e){w(a.find(e=>"portfolio_header"===e.key)?.value||""),_(a.find(e=>"portfolio_header_highlight"===e.key)?.value||""),C(a.find(e=>"portfolio_description"===e.key)?.value||""),q(a.find(e=>"portfolio_achievements_title"===e.key)?.value||""),z(a.find(e=>"portfolio_achievements_description"===e.key)?.value||"");const e=[];for(let s=1;6>=s;s++){const t=a.find(e=>e.key===`portfolio_achievement_${s}_value`)?.value||"",l=a.find(e=>e.key===`portfolio_achievement_${s}_label`)?.value||"";(t||l)&&e.push({value:t,label:l})}E(e),K(a.find(e=>"portfolio_cta_title"===e.key)?.value||""),$(a.find(e=>"portfolio_cta_text"===e.key)?.value||""),L(a.find(e=>"portfolio_cta_button"===e.key)?.value||"")}}catch(a){}})(),()=>{e=!1}},[]),a.useEffect(()=>{if("all"===u)b(T);else{const e=T.filter(e=>e.category===u);b(e)}},[u,T]);const H=e=>{j(e)};return A?e.jsx("div",{className:"bg-gray-50 py-16 overflow-x-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...[,,,,,,]].map((a,s)=>e.jsx("div",{className:"bg-gray-200 h-64 rounded"},s))})]})})}):G?e.jsx("div",{className:"bg-gray-50 py-16 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Viga"}),e.jsx("p",{className:"text-red-600 mb-8",children:"Portfoolio elemente ei õnnestunud laadida. Palun proovige hiljem uuesti."})]})}):e.jsxs("div",{className:"bg-gray-50 min-h-screen overflow-x-hidden",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:e.jsx("div",{className:"mb-6",children:e.jsx(p,{})})}),e.jsx("section",{className:"py-12 md:py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 mb-4 md:mb-6 break-words",children:k&&N.includes(k)?e.jsxs(e.Fragment,{children:[N.split(k)[0],e.jsx("span",{className:"text-primary",children:k}),N.split(k)[1]]}):N||"Portfoolio"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed px-4 break-words",children:S||"Vaadake meie tehtud töid ja projekte"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 mb-10",children:[e.jsxs(t,{variant:"all"===u?"default":"outline",onClick:()=>H("all"),children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),"Kõik"]}),[...new Set(T.map(e=>e.category).filter(Boolean))].map(a=>e.jsx(t,{variant:u===a?"default":"outline",onClick:()=>H(a),children:a},a))]}),f.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(a=>e.jsxs(i,{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>y(a),children:[e.jsx(r,{src:a.image_url||"/placeholder.svg",alt:a.title,className:"w-full h-48 object-cover hover:scale-105 transition-transform duration-300",width:600,height:300}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(m,{children:a.category||"Üldine"})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-opacity duration-300 flex items-center justify-center",children:e.jsx(d,{className:"text-white opacity-0 hover:opacity-100 transition-opacity duration-300 w-8 h-8"})})]}),e.jsxs(o,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2 break-words",children:a.title}),a.description&&e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:a.description}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:a.tags.split(",").map((a,s)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:a.trim()},s))}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>y(a),className:"w-full",children:[e.jsx(d,{className:"mr-2 h-4 w-4"}),"Vaata pilti"]})]})]},a.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Portfoolio elemente ei leitud"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Proovige muuta filtrit"}),e.jsx(t,{onClick:()=>j("all"),children:"Näita kõiki"})]}),P&&V.length>0&&e.jsxs("section",{className:"bg-white py-12 md:py-16 px-6 md:px-8 rounded-lg mt-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 break-words",children:P}),B&&e.jsx("p",{className:"text-gray-600 max-w-3xl mx-auto text-lg leading-relaxed break-words",children:B})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:V.map((a,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:a.value}),e.jsx("div",{className:"text-gray-600 font-medium",children:a.label})]},s))})]}),F&&e.jsxs("section",{className:"bg-primary text-white py-12 md:py-16 px-6 md:px-8 rounded-lg mt-16 text-center",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-3 md:mb-4 break-words",children:F}),O&&e.jsx("p",{className:"text-white text-base md:text-lg mb-6 md:mb-8 max-w-2xl mx-auto leading-relaxed break-words",children:O}),D&&e.jsx(t,{variant:"secondary",size:"lg",className:"text-sm md:text-base",children:D})]})]}),v&&e.jsx(x,{open:!!v,onOpenChange:()=>y(null),children:e.jsx(h,{className:"max-w-4xl max-h-[90vh] p-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>y(null),className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white rounded-full p-2 hover:bg-opacity-70 transition-opacity",children:e.jsx(c,{className:"w-5 h-5"})}),e.jsx(r,{src:v.image_url||"/placeholder.svg",alt:v.title,className:"w-full max-h-[80vh] object-contain",width:1200,height:800}),e.jsxs("div",{className:"p-6 bg-white",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx(m,{children:v.category||"Üldine"})}),e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:v.title}),v.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:v.description}),v.tags&&e.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.split(",").map((a,s)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:a.trim()},s))})]})]})})})]})};export{u as default};
