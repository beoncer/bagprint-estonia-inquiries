import{j as e}from"./ui-core-DIFKu14A.js";import{r as s}from"./react-core-CGKACH0y.js";import{u as a}from"./data-BmXeSXkP.js";import{S as t,ae as l,af as r,B as i,s as d}from"./page-home-CQU8oqVu.js";import{B as c,I as m}from"./page-products-B7wMRW4G.js";import{L as x}from"./router-Enmi9DRI.js";const o=async()=>{const{data:e,error:s}=await d.from("blog_posts").select("*").order("created_at",{ascending:!1});if(s)throw s;return e||[]},n=()=>{const[n,h]=s.useState(""),[g,p]=s.useState([]),[u,j]=s.useState(""),[b,v]=s.useState(""),[f,N]=s.useState(""),[y,w]=s.useState(""),[k,_]=s.useState(""),[S,L]=s.useState(""),[C,z]=s.useState(""),[E,q]=s.useState(""),{data:B=[],isLoading:D,error:F}=a({queryKey:["blog-posts"],queryFn:o,staleTime:3e5});return s.useEffect(()=>{(async()=>{const{data:e}=await d.from("website_content").select("key, value").eq("page","blog");e&&(j(e.find(e=>"blog_header"===e.key)?.value||""),v(e.find(e=>"blog_header_highlight"===e.key)?.value||""),N(e.find(e=>"blog_description"===e.key)?.value||""),w(e.find(e=>"blog_cta_title"===e.key)?.value||""),_(e.find(e=>"blog_cta_subtitle"===e.key)?.value||""),L(e.find(e=>"blog_cta_phone"===e.key)?.value||""),z(e.find(e=>"blog_cta_phone_hours"===e.key)?.value||""),q(e.find(e=>"blog_cta_button"===e.key)?.value||""))})()},[]),s.useEffect(()=>{if(""===n.trim())p(B);else{const e=B.filter(e=>e.title.toLowerCase().includes(n.toLowerCase())||e.excerpt.toLowerCase().includes(n.toLowerCase()));p(e)}},[n,B]),D||!u?e.jsx("div",{className:"bg-gray-50 py-16 overflow-x-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...[,,,,,,]].map((s,a)=>e.jsx("div",{className:"bg-gray-200 h-96 rounded"},a))})]})})}):F?e.jsx("div",{className:"bg-gray-50 py-16 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Viga"}),e.jsx("p",{className:"text-red-600 mb-8",children:"Blogposte ei õnnestunud laadida. Palun proovige hiljem uuesti."})]})}):e.jsxs("div",{className:"bg-gray-50 min-h-screen overflow-x-hidden",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:e.jsx("div",{className:"mb-6",children:e.jsx(c,{})})}),e.jsx("section",{className:"py-12 md:py-16",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center mb-12 md:mb-16",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 mb-4 md:mb-6 break-words",children:b&&u.includes(b)?e.jsxs(e.Fragment,{children:[u.split(b)[0],e.jsx("span",{className:"text-primary",children:b}),u.split(b)[1]]}):u}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed px-4 break-words",children:f})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm mb-10",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"relative max-w-md mx-auto",children:[e.jsx(m,{type:"text",placeholder:"Otsi artikleid...",value:n,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-2"}),e.jsx(t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})}),g.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-6 text-gray-600",children:["Leitud ",g.length," artiklit"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:g.map(s=>{return e.jsxs("article",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx(x,{to:"/blogi/"+s.slug,className:"block",children:e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(l,{size:14}),e.jsx("span",{children:(a=s.created_at,new Date(a).toLocaleDateString("et-EE",{year:"numeric",month:"long",day:"numeric"}))})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{size:14}),e.jsxs("span",{children:[s.read_time," lugemist"]})]})]}),e.jsx(x,{to:"/blogi/"+s.slug,children:e.jsx("h2",{className:"text-xl font-semibold mb-3 hover:text-primary transition-colors break-words",children:s.title})}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:s.excerpt}),e.jsx(x,{to:"/blogi/"+s.slug,children:e.jsx(i,{variant:"link",size:"sm",className:"p-0 text-primary hover:text-primary/80",children:"Loe edasi →"})})]})]},s.id);var a})})]}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Artikleid ei leitud"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Proovige muuta otsinguterminit"}),e.jsx(i,{onClick:()=>h(""),children:"Näita kõiki artikleid"})]}),y&&e.jsxs("section",{className:"bg-primary text-white py-12 md:py-16 px-6 md:px-8 rounded-lg mt-16 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 break-words",children:y}),k&&e.jsx("h3",{className:"text-2xl font-medium mb-6 md:mb-8 break-words",children:k}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center gap-6 md:gap-8 max-w-4xl mx-auto",children:[S&&e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("div",{className:"text-xl font-semibold break-words",children:S}),C&&e.jsx("div",{className:"text-sm opacity-90 break-words",children:C})]}),E&&e.jsx(i,{variant:"secondary",size:"lg",children:E})]})]})]})]})};export{n as default};
